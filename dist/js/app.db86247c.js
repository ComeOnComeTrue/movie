(function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],l=0,h=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},i={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-187b655b":"a13fc89f","chunk-45d5300e":"9198048a","chunk-62e90951":"4bf0c2b7","chunk-e51d174e":"335f62a3"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-187b655b":1,"chunk-45d5300e":1,"chunk-62e90951":1,"chunk-e51d174e":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-187b655b":"59e1b4ce","chunk-45d5300e":"68a8f4e6","chunk-62e90951":"0a28e52d","chunk-e51d174e":"c0d2070e"}[e]+".css",i=c.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===i))return t()}var h=document.getElementsByTagName("style");for(s=0;s<h.length;s++){u=h[s],l=u.getAttribute("data-href");if(l===r||l===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],f.parentNode.removeChild(f),n(o)},f.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var h=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",h.name="ChunkLoadError",h.type=r,h.request=a,n[1](h)}i[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var h=0;h<u.length;h++)t(u[h]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"0c8d":function(e,t,n){},2821:function(e,t,n){"use strict";var r=n("f3a1"),a=n.n(r);a.a},"3eed":function(e,t,n){"use strict";var r=n("0c8d"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("div",{staticClass:"nav-wrapper"},[n("div",{staticClass:"nav-box"},[n("div",{staticClass:"logo",on:{click:e.logoClick}}),n("div",{staticClass:"router"},[n("router-link",{attrs:{to:"/home"}},[e._v("首页")]),n("router-link",{attrs:{to:"/movie"}},[e._v("电影")])],1),n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInfo,expression:"searchInfo"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.searchInfo},on:{focus:e.searchFocus,blur:e.searchBlur,keydown:function(t){return e.searchKeydown(t)},input:function(t){t.target.composing||(e.searchInfo=t.target.value)}}}),n("span",{on:{click:e.searchClick}},[e._v("搜索")]),e.isSearchInfo?[n("ul",e._l(e.searchDataList,(function(t,r){return n("li",{key:r},[n("a",{on:{click:function(n){return e.handleSearchRouter(t.id)}}},[e._v(e._s(t.name))])])})),0)]:e._e(),e.isSearcMovie?[e._m(0)]:e._e()],2),n("div",{staticClass:"login-box"},[e.loginUser?n("div",{staticClass:"loginOut"},[n("span",[e._v(e._s(e.loginUser.name))]),n("button",{on:{click:e.loginOut}},[e._v("退出登录")])]):n("div",{staticClass:"login"},[n("button",{staticClass:"login",on:{click:e.login}},[e._v("登录")])])])])]),n("div",{staticClass:"view-box"},[n("router-view")],1)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",{staticClass:"noneSearchInfo"},[e._v("暂无这个电影")])])}],o=(n("4de4"),n("caad"),n("fb6a"),n("b0c0"),n("ac1f"),n("2532"),n("5319"),{data:function(){return{searchInfo:"",oldSearchData:[],curSearchData:[],isSearchInfo:!1,isSearcMovie:!1}},created:function(){var e=this;this.$axios.get("https://comeoncometrue.github.io/movie/dist/moviesData/movie.json").then((function(t){e.oldSearchData=t}))},computed:{loginUser:function(){return this.$store.state.loginUser.data},searchDataList:function(){var e=this,t=this.oldSearchData;return""!==this.searchInfo?(this.curSearchData=t.filter((function(t){return t.name.includes(e.searchInfo)})).slice(0,10),this.isSearchInfo=!0,0!=this.curSearchData.length?this.isSearcMovie=!1:this.isSearcMovie=!0,this.curSearchData):(this.isSearcMovie=!1,this.oldSearchData.slice(0,10))}},methods:{loginOut:function(){this.$store.dispatch("loginUser/loginOut"),this.$router.push("/login")},logoClick:function(){"/home"!=this.$router.history.current.path&&this.$router.push("/home")},login:function(){this.$router.push("/login")},searchFocus:function(){this.curSearchData=this.oldSearchData.slice(0,10),this.isSearchInfo=!0},searchBlur:function(){var e=this;setTimeout((function(){e.isSearchInfo=!1}),200)},handleSearchRouter:function(e){"/movie/".concat(e)!=this.$route.path&&(this.$router.replace("/movie/"+e),this.isSearchInfo=!1,location.reload(!0))},searchKeydown:function(e){13==e.keyCode&&this.searchSkip()},searchClick:function(){this.searchSkip()},searchSkip:function(){var e=this,t=this.oldSearchData.filter((function(t){return t.name.includes(e.searchInfo)})).slice(0,10);""!=this.searchInfo?0!=t.length?(this.$store.commit("movie/searchRouterData",{searchRouterData:t}),this.$router.push("/searchMovie"),this.searchInfo=""):alert("暂无这个电影"):alert("请输入电影你想搜索的电影名")}}}),s=o,c=(n("034f"),n("2877")),u=Object(c["a"])(s,a,i,!1,null,null,null),l=u.exports,h=(n("d3b7"),n("8c4f")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("home-slider",{attrs:{slideData:e.slideData}})],1)},d=[],m=(n("4160"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"slide-box"},[n("div",{staticClass:"slide",on:{mouseenter:e.slideEnter,mouseleave:e.slideLeave}},e._l(e.slideData,(function(e){return n("router-link",{key:e.id,attrs:{href:"#",to:"/movie/"+e.id}},[n("img",{staticClass:"slide-img",attrs:{src:e.imgSrc,alt:e.name}})])})),1),n("ul",{staticClass:"slideMovieName"},e._l(e.slideData,(function(t,r){return n("li",{key:t.id,staticClass:"movieName",on:{mouseenter:function(t){return e.HandleNameEnter(r)},mouseleave:e.slideLeave}},[e._v(e._s(t.name))])})),0)])}),p=[],v=(n("99af"),{props:{slideData:{type:Array}},updated:function(){this.initMove(),this.autoMove()},beforeDestroy:function(){clearInterval(this.timer)},data:function(){return{curDisplay:0,imgArr:document.getElementsByClassName("slide-img"),timer:null}},methods:{HandleNameEnter:function(e){clearInterval(this.timer),this.curDisplay!=e&&(this.curDisplay=e,this.initMove())},initMove:function(){for(var e,t,n=this.imgArr.length,r=this.imgArr,a=Math.floor(n/2),i=0;i<a;i++)e=(this.curDisplay+a+i+1)%7,r[e].style.transform="translateX(".concat(-150*(i+1),"px) translateZ(").concat(200-100*i,"px) rotateY(30deg)"),t=(this.curDisplay+i+1)%n,r[t].style.transform="translateX(".concat(150*(i+1),"px) translateZ(").concat(200-100*i,"px) rotateY(-30deg)");r[this.curDisplay].style.transform="translateZ(300px)"},slideEnter:function(){clearInterval(this.timer)},slideLeave:function(){this.autoMove()},autoMove:function(){var e=this,t=this.imgArr.length;this.timer=setInterval((function(){e.curDisplay==t-1?e.curDisplay=0:e.curDisplay++,e.initMove()}),2e3)}}}),g=v,b=(n("2821"),Object(c["a"])(g,m,p,!1,null,"52aa8ef4",null)),S=b.exports,y={components:{HomeSlider:S},created:function(){var e=this;this.$axios.get("https://comeoncometrue.github.io/movie/dist/moviesData/movie.json").then((function(t){e.slideData=t.slice(0,7),e.slideData.forEach((function(e){e.imgSrc="https://images.weserv.nl/?url="+e.imgSrc}))}))},data:function(){return{slideData:[]}}},k=y,D=(n("3eed"),Object(c["a"])(k,f,d,!1,null,"727917a5",null)),w=D.exports,_=n("2f62"),x=(n("96cf"),n("1da1")),C=n("9602"),I={namespaced:!0,state:{data:null,isLoading:!1},mutations:{setIsLoading:function(e,t){e.isLoading=t},setUser:function(e,t){e.data=t}},actions:{login:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit("setIsLoading",!0),n.next=3,C["a"].login(t.loginId,t.loginPwd);case 3:if(r=n.sent,!r){n.next=9;break}return e.commit("setUser",r),localStorage.setItem("loginUser",JSON.stringify(r)),e.commit("setIsLoading",!1),n.abrupt("return",!0);case 9:return e.commit("setIsLoading",!1),n.abrupt("return",!1);case 11:case"end":return n.stop()}}),n)})))()},loginOut:function(e){e.commit("setUser",null),localStorage.removeItem("loginUser")},syncLocal:function(e){var t=localStorage.getItem("loginUser");if(t){var n=JSON.parse(t);e.commit("setUser",n)}}}},M={namespaced:!0,state:{pageMovies:[],current:1,pageSize:2,total:0,panelNumber:5,loadingShow:!1,searchRouterData:[{name:"爱尔兰人",imgSrc:"https://images.weserv.nl/?url=img3.doubanio.com/view/photo/s_ratio_poster/public/p2568902055.jpg",detail:"2019-09-27(纽约电影节) / 2019-11-01(美国点映) / 2019-11-27(美国网络) / 罗伯特·德尼罗 / 阿尔·帕西诺 / 乔·佩西 / 安娜·帕奎因 / 杰西·普莱蒙 / 哈威·凯特尔 / 斯蒂芬·格拉汉姆 / 鲍比·坎纳瓦尔 / 杰克·休斯顿 / 阿莱卡萨·帕拉迪诺 / 凯瑟琳·纳杜奇...",video:"https://vdept.bdstatic.com/36496953346a636b594d3434625a4a36/6a747a3871446a4e/7c161a01d7fdc0e46462fdf577b585afbda6dd0df223d9e49e5ee43e35fb3406c78fed50897b7392956dd63835ae369e.mp4?auth_key=1592198652-0-0-cc9bcc803f65ce1160d5598f54c095ce",id:1}]},mutations:{setState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)e[n]=t[n]},searchRouterData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.searchRouterData=[];for(var n=0;n<t.searchRouterData.length;n++)t.searchRouterData[n].imgSrc="https://images.weserv.nl/?url="+t.searchRouterData[n].imgSrc,e.searchRouterData.push(t.searchRouterData[n])}},actions:{fetch:function(e){e.commit("setState",{loadingShow:!0}),C["a"].getMovies(e.state.current,e.state.pageSize).then((function(t){e.commit("setState",t),e.commit("setState",{loadingShow:!1})}))}}};r["a"].use(_["a"]);var j=new _["a"].Store({strict:!1,state:{},mutations:{},actions:{},modules:{loginUser:I,movie:M}});r["a"].use(h["a"]);var O=[{path:"/",redirect:"/home"},{path:"/home",component:w},{path:"/movie",name:"Movie",component:function(){return n.e("chunk-62e90951").then(n.bind(null,"def6"))}},{path:"/movie/:id",component:function(){return n.e("chunk-187b655b").then(n.bind(null,"043a"))},meta:{needLogin:!0}},{path:"/login",component:function(){return n.e("chunk-e51d174e").then(n.bind(null,"a55b"))}},{path:"/searchMovie",name:"SearchMovie",component:function(){return n.e("chunk-45d5300e").then(n.bind(null,"8fd0"))},meta:{needLogin:!0}}],E=new h["a"]({mode:"history",base:"/",routes:O});E.beforeEach((function(e,t,n){e.meta&&e.meta.needLogin?j.state.loginUser.data?n():n("/login"):n()}));var L=E,R=n("82ae"),$=n.n(R);$.a.interceptors.response.use((function(e){if("https://comeoncometrue.github.io/movie/dist/moviesData/movie.json"===e.config.url)return e.data}));var U=$.a;n("306b"),n("b059");j.dispatch("loginUser/syncLocal"),r["a"].config.productionTip=!1,r["a"].prototype.$axios=U,new r["a"]({router:L,store:j,axios:U,render:function(e){return e(l)}}).$mount("#app")},"85ec":function(e,t,n){},9602:function(e,t,n){"use strict";n("4de4"),n("4160"),n("fb6a"),n("d3b7"),n("159b"),n("96cf");var r=n("1da1");t["a"]={getMovies:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://comeoncometrue.github.io/movie/dist/moviesData/movie.json").then((function(e){return e.json()}));case 2:return r=n.sent,r.forEach((function(e){e.imgSrc="https://images.weserv.nl/?url="+e.imgSrc})),n.abrupt("return",{total:r.length,pageMovies:r.slice(e*t-t,e*t)});case 5:case"end":return n.stop()}}),n)})))()},getMoviesDetail:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=+e,t.next=3,fetch("https://comeoncometrue.github.io/movie/dist/moviesData/movie.json").then((function(e){return e.json()}));case 3:return n=t.sent,n.forEach((function(e){e.imgSrc="https://images.weserv.nl/?url="+e.imgSrc})),r=n.filter((function(t){return t.id===e})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},login:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){setTimeout((function(){n("admin"===e&&"123456"===t?{loginId:e,name:"超级会员"}:null)}),1e3)})));case 1:case"end":return n.stop()}}),n)})))()}}},b059:function(e,t,n){},f3a1:function(e,t,n){}});
//# sourceMappingURL=app.db86247c.js.map